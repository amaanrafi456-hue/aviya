:root {
  --bg: #020617
  --sidebar: #020617
  --surface: #020617
  --surface-soft: #0b1120
  --text: #e5e7eb
  --muted: #9ca3af
  --accent: #3b82f6
  --accent-soft: #bfdbfe
}

* {
  box-sizing: border-box
}

body {
  margin: 0
  background: radial-gradient(circle at top, #0b1634 0, #020617 55%, #020617 100%)
  color: var(--text)
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif
}

.app-shell {
  display: flex
  height: 100vh
}

/* sidebar */
.sidebar {
  width: 260px
  background: linear-gradient(180deg, #020617 0, #020617 40%, #020617 100%)
  border-right: 1px solid rgba(15, 23, 42, 0.9)
  display: flex
  flex-direction: column
  justify-content: space-between
  padding: 12px
}

.sidebar-top {
  display: flex
  flex-direction: column
  gap: 12px
}

.brand {
  display: flex
  align-items: center
  gap: 10px
  margin-bottom: 10px
  padding: 5px 2px
}

.logo {
  width: 34px
  height: 34px
  border-radius: 10px
  object-fit: contain
  background: rgba(59, 130, 246, 0.12)
  box-shadow: 0 0 18px rgba(59, 130, 246, 0.28)
}

.brand-title {
  font-size: 16px
  font-weight: 650
  color: #f9fafb
  letter-spacing: 0.5px
}

.search-box {
  display: flex
  align-items: center
  gap: 8px
  background: rgba(15, 23, 42, 0.8)
  border: 1px solid rgba(148, 163, 184, 0.35)
  border-radius: 12px
  padding: 4px 10px
  box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.4)
}

.search-box input {
  background: transparent
  border: none
  outline: none
  color: #f9fafb
  font-size: 13px
}

.primary-btn {
  display: flex
  align-items: center
  gap: 8px
  background: rgba(37, 99, 235, 0.9)
  border: 1px solid rgba(96, 165, 250, 0.35)
  border-radius: 999px
  padding: 8px 12px
  color: #eaf2ff
  cursor: pointer
  font-size: 13px
  box-shadow: none
  transition: transform 0.12s ease, filter 0.12s ease, background 0.12s ease
}

.primary-btn:hover {
  transform: translateY(-1px)
  filter: brightness(1.06)
}

.btn-icon {
  width: 22px
  height: 22px
  border-radius: 999px
  background: rgba(248, 250, 252, 0.06)
  display: grid
  place-items: center
  font-weight: 600
}

.section-label {
  font-size: 11px
  color: rgba(148, 163, 184, 0.7)
  text-transform: uppercase
  letter-spacing: 0.08em
}

.convo-list {
  display: flex
  flex-direction: column
  gap: 5px
  max-height: 55vh
  overflow-y: auto
}

.convo-item {
  background: transparent
  border: 1px solid transparent
  border-radius: 10px
  padding: 6px 9px
  font-size: 13px
  cursor: pointer
  color: #e5e7eb
  transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease
}

.convo-item:hover,
.convo-item.active {
  background: rgba(15, 23, 42, 0.85)
  border-color: rgba(59, 130, 246, 0.55)
  color: #f9fafb
}

/* sidebar bottom */
.sidebar-bottom {
  border-top: 1px solid rgba(15, 23, 42, 0.9)
  padding-top: 10px
  display: flex
  flex-direction: column
  gap: 8px
  position: relative
}

.ghost-btn {
  background: transparent
  border: none
  display: flex
  align-items: center
  gap: 8px
  color: #d4d4d8
  font-size: 13px
  cursor: pointer
}

/* user card */
.user-card {
  background: rgba(15, 23, 42, 0.95)
  border: 1px solid rgba(148, 163, 184, 0.26)
  border-radius: 14px
  padding: 7px 8px
  display: flex
  gap: 8px
  align-items: center
  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.9)
  position: relative
}

.avatar {
  background: none
  border: none
  padding: 0
  margin-right: 8px
  display: flex
  align-items: center
  justify-content: center
}

.avatar-img {
  width: 26px
  height: 26px
  border-radius: 6px
  box-shadow: 0 0 12px rgba(59, 130, 246, 0.38)
  background: rgba(59, 130, 246, 0.12)
}

.user-meta {
  flex: 1
}

.user-name {
  margin: 0
  font-size: 13px
  color: #f9fafb
}

.user-plan {
  margin: 2px 0 0
  font-size: 11px
  color: rgba(226, 232, 240, 0.6)
}

.more-btn {
  background: transparent
  border: none
  color: rgba(226, 232, 240, 0.7)
  cursor: pointer
}

.user-menu {
  position: absolute
  bottom: 50px
  right: 0
  background: #020617
  border: 1px solid rgba(148, 163, 184, 0.5)
  border-radius: 8px
  min-width: 110px
  padding: 4px 0
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6)
  display: flex
  flex-direction: column
  z-index: 1000
  opacity: 1
  transition: opacity 0.15s ease, transform 0.15s ease
}

.user-menu.hidden {
  display: none
}

.user-menu button {
  background: transparent
  border: none
  color: #e5e7eb
  text-align: left
  padding: 6px 12px
  font-size: 13px
  cursor: pointer
  border-radius: 4px
}

.user-menu button:hover {
  background: rgba(148, 163, 184, 0.15)
  color: #fff
}

/* main area */
.main {
  flex: 1
  display: flex
  flex-direction: column
  background: radial-gradient(circle at top, #020617 0, #020617 55%, #020617 100%)
}

.topbar {
  height: 56px
  border-bottom: 1px solid rgba(15, 23, 42, 0.9)
  display: flex
  align-items: center
  justify-content: space-between
  padding: 0 18px
  background: rgba(15, 23, 42, 0.96)
  backdrop-filter: blur(20px)
}

.topbar h1 {
  margin: 0
  font-size: 15px
}

.topbar p {
  margin: 3px 0 0
  font-size: 11px
  color: var(--muted)
}

.top-actions {
  display: flex
  gap: 8px
}

.top-icon {
  background: transparent
  border: none
  width: 30px
  height: 30px
  display: grid
  place-items: center
  border-radius: 9px
  color: #a1a1aa
  cursor: pointer
  transition: background 0.15s ease, color 0.15s ease, transform 0.1s ease
}

.top-icon:hover {
  background: rgba(37, 99, 235, 0.16)
  color: #f9fafb
  transform: translateY(-1px)
}

.top-icon.active {
  background: rgba(37, 99, 235, 0.22)
  color: #fff
}

/* chat area */
.chat {
  flex: 1
  overflow-y: auto
  padding: 16px 0 110px
  display: flex
  flex-direction: column
  gap: 14px
  width: min(900px, 100%)
  margin: 0 auto
}

.message-row {
  width: 100%
  display: flex
  justify-content: center
}

.message {
  width: min(700px, 92%)
  display: flex
  gap: 12px
}

.message.assistant {
  justify-content: flex-start
}

.message.user {
  justify-content: flex-end
}

.message .bubble {
  background: var(--surface-soft)
  border: 1px solid rgba(31, 41, 55, 0.9)
  border-radius: 16px
  padding: 8px 13px 10px
  line-height: 1.5
  font-size: 14px
  max-width: 540px
  white-space: pre-wrap
  box-shadow: 0 8px 22px rgba(15, 23, 42, 0.9)
}

.message.user .bubble {
  background: rgba(37, 99, 235, 0.9)
  border-color: rgba(96, 165, 250, 0.35)
  color: #eff6ff
  box-shadow: 0 10px 24px rgba(37, 99, 235, 0.28)
}

.message.user .avatar {
  display: none
}

/* typing indicator */
.typing {
  position: fixed
  bottom: 78px
  left: 260px
  right: 0
  width: min(700px, 92%)
  margin: 0 auto
  display: flex
  align-items: center
  gap: 6px
}

.typing .dot {
  width: 7px
  height: 7px
  border-radius: 999px
  background: rgba(59, 130, 246, 0.85)
  animation: bounce 1s infinite ease-in-out
}

.typing .dot:nth-child(2) {
  animation-delay: 0.1s
}

.typing .dot:nth-child(3) {
  animation-delay: 0.2s
}

.typing-text {
  font-size: 12px
  color: rgba(248, 250, 252, 0.8)
}

.hidden {
  display: none
}

@keyframes bounce {
  0%, 80%, 100% {
    transform: scale(0.6)
    opacity: 0.4
  }
  40% {
    transform: scale(1)
    opacity: 1
  }
}

/* input bar */
.input-bar {
  position: fixed
  bottom: 0
  left: 260px
  right: 0
  background: rgba(15, 23, 42, 0.97)
  border-top: 1px solid rgba(15, 23, 42, 0.9)
  padding: 10px 14px 11px
  display: flex
  gap: 10px
  align-items: center
  backdrop-filter: blur(18px)
}

.mini-icons {
  display: flex
  gap: 10px
}

.mini-icon {
  background: transparent
  border: none
  width: 34px
  height: 34px
  display: flex
  align-items: center
  justify-content: center
  border-radius: 11px
  cursor: pointer
  transition: background 0.15s ease, color 0.15s ease, transform 0.1s ease
}

.mini-icon svg {
  width: 22px
  height: 22px
  stroke: #e2e8f0
  stroke-width: 2
  fill: none
  stroke-linecap: round
  stroke-linejoin: round
}

.mini-icon:hover {
  background: rgba(37, 99, 235, 0.14)
}

.num-icon {
  font-size: 15px
  font-weight: 800
  color: #e2e8f0
  letter-spacing: -0.5px
}

.mini-icon.active {
  background: rgba(37, 99, 235, 0.22)
  outline: 1px solid rgba(96, 165, 250, 0.8)
}

.input-wrap {
  flex: 1
  display: flex
  align-items: center
  background: #020617
  border: 1px solid rgba(148, 163, 184, 0.6)
  border-radius: 999px
  padding: 4px 6px 4px 12px
  gap: 6px
}

.input-wrap input {
  flex: 1
  background: transparent
  border: none
  outline: none
  color: #fff
  font-size: 14px
}

.input-wrap input::placeholder {
  color: #71717a
}

.send-btn {
  background: rgba(37, 99, 235, 0.9)
  border: 1px solid rgba(96, 165, 250, 0.28)
  width: 32px
  height: 32px
  display: grid
  place-items: center
  color: #eff6ff
  border-radius: 999px
  cursor: pointer
  box-shadow: none
  transition: transform 0.1s ease, filter 0.1s ease
}

.send-btn:hover {
  transform: translateY(-1px)
  filter: brightness(1.06)
}

/* right buttons */
.right-buttons {
  display: flex
  gap: 12px
  align-items: center
}

.circle-btn {
  background: #020617
  border: 2px solid rgba(209, 213, 219, 0.65)
  width: 26px
  height: 26px
  border-radius: 50%
  display: flex
  align-items: center
  justify-content: center
  cursor: pointer
}

.circle-btn .inner-circle {
  width: 9px
  height: 9px
  border: 2px solid rgba(209, 213, 219, 0.65)
  border-radius: 50%
}

.circle-btn.solid {
  background: rgba(239, 246, 255, 0.9)
  border-color: rgba(191, 219, 254, 0.6)
}

.circle-btn.solid .square {
  width: 8px
  height: 8px
  background: rgba(29, 78, 216, 0.9)
  border-radius: 2px
}

/* scrollbars */
.convo-list::-webkit-scrollbar,
.chat::-webkit-scrollbar {
  width: 5px
}

.convo-list::-webkit-scrollbar-thumb,
.chat::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.4)
  border-radius: 999px
}

/* context menu */
.context-menu {
  position: fixed
  background: #020617
  border: 1px solid rgba(148, 163, 184, 0.5)
  border-radius: 8px
  padding: 4px
  min-width: 130px
  z-index: 9999
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6)
}

.context-menu.hidden {
  display: none
}

.context-menu button {
  width: 